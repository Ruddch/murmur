(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8:(e,t,s)=>{Promise.resolve().then(s.bind(s,9172))},9172:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(5155),i=s(6766),r=s(2115);function l(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#0f0f0f_1px,transparent_1px),linear-gradient(to_bottom,#0f0f0f_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_110%)]"}),(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[70vh] bg-gradient-to-b from-[#00ff00] to-transparent opacity-15 blur-[100px]"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 bg-gradient-to-tl from-[#00ff00] to-transparent opacity-10 blur-3xl"})]})}var n=s(8438),c=s(5557);function o(){let{login:e}=(0,c.Zf)(),{status:t}=(0,n.F)();return"connecting"===t||"reconnecting"===t?(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10",children:(0,a.jsx)("div",{className:"animate-spin",children:(0,a.jsx)(i.default,{src:"/murmur/abs.svg",alt:"Loading",width:24,height:24})})}):(0,a.jsxs)("button",{className:"rounded-full border border-solid border-transparent transition-colors flex items-center justify-center bg-foreground text-background gap-2 hover:bg-[#383838] hover:text-white hover:cursor-pointer dark:hover:bg-[#e0e0e0] dark:hover:text-black text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 font-[family-name:var(--font-roobert)]",onClick:e,children:[(0,a.jsx)(i.default,{className:"dark:invert",src:"/murmur/abs.svg",alt:"Abstract logomark",width:20,height:20,style:{filter:"brightness(0)"}}),"Sign in with Abstract"]})}var d=s(1177);function x(e){let{balance:t}=e;return(0,a.jsx)("div",{className:"w-full bg-black/20 rounded-lg p-4 border border-white/10",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300 font-[family-name:var(--font-roobert)]",children:"Balance"}),(0,a.jsx)("span",{className:"text-sm font-mono text-white",children:t?(0,a.jsxs)(a.Fragment,{children:[parseFloat(t.formatted).toFixed(4)," ",t.symbol]}):"Loading..."})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300 font-[family-name:var(--font-roobert)]",children:"Network"}),(0,a.jsx)("span",{className:"text-sm text-green-400 font-[family-name:var(--font-roobert)]",children:"Abstract Testnet"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300 font-[family-name:var(--font-roobert)]",children:"Wallet Type"}),(0,a.jsx)("span",{className:"text-sm text-blue-400 font-[family-name:var(--font-roobert)]",children:"Smart Contract"})]})]})})}var m=s(3244),u=s(3412),h=s(3597);let f="0x83d3e715a0230BE1A79D327e61cF5A08b7c4dc80",g=[{type:"constructor",inputs:[],stateMutability:"nonpayable"},{type:"function",name:"click",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getLeaderboard",inputs:[{name:"n",type:"uint256",internalType:"uint256"}],outputs:[{name:"topUsers",type:"address[]",internalType:"address[]"},{name:"topScores",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"getTotalUsers",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getUserRank",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[{name:"rank",type:"uint256",internalType:"uint256"},{name:"score",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"reset",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"totalClicks",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"userClicks",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"Clicked",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"userClicks",type:"uint256",indexed:!1,internalType:"uint256"},{name:"totalClicks",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Reset",inputs:[],anonymous:!1}];var b=s(7458),p=s(1135),j=s(6556),y=s(6248);let v=e=>({signer:e.signer,expiresAt:e.expiresAt.toString(),feeLimit:{limitType:e.feeLimit.limitType,limit:e.feeLimit.limit.toString(),period:e.feeLimit.period.toString()},callPolicies:e.callPolicies.map(e=>({target:e.target,selector:e.selector,valueLimit:{limitType:e.valueLimit.limitType,limit:e.valueLimit.limit.toString(),period:e.valueLimit.period.toString()},maxValuePerUse:e.maxValuePerUse.toString(),constraints:e.constraints})),transferPolicies:e.transferPolicies}),w=e=>({signer:e.signer,expiresAt:BigInt(e.expiresAt),feeLimit:{limitType:e.feeLimit.limitType,limit:BigInt(e.feeLimit.limit),period:BigInt(e.feeLimit.period)},callPolicies:e.callPolicies.map(e=>({target:e.target,selector:e.selector,valueLimit:{limitType:e.valueLimit.limitType,limit:BigInt(e.valueLimit.limit),period:BigInt(e.valueLimit.period)},maxValuePerUse:BigInt(e.maxValuePerUse),constraints:e.constraints})),transferPolicies:e.transferPolicies});function N(){let{address:e,isConnected:t}=(0,n.F)(),{sessionConfig:s,isSessionValid:a,isCreatingSession:i,isExecutingSession:l,isSessionLoading:o,isSessionSuccess:d,createNewSession:x,revokeCurrentSession:N,executeWithSession:k,sessionClient:C}=function(){let{address:e}=(0,c.DK)(),{data:t,isLoading:s}=(0,c.d0)(),[a,i]=(0,r.useState)(null),[l,n]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),[u,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[S,L]=(0,r.useState)(!1),[T,D]=(0,r.useState)(null),{createSessionAsync:A,isPending:P}=(0,c.oz)(),{revokeSessionsAsync:E,isPending:I}=(0,c.LO)(),{isLoading:_,isSuccess:F}=(0,h.g)({hash:T});(0,r.useEffect)(()=>{!e&&(a||l||o||x)&&(l&&(async()=>{try{await E({sessions:l})}catch(e){}})(),i(null),n(null),d(null),m(null),localStorage.clear())},[e]),(0,r.useEffect)(()=>{if(e){let t=localStorage.getItem("session_".concat(e));if(t)try{let s=JSON.parse(t);if(s.expiresAt>Date.now()){i(s);let e=w(s.sessionConfig);n(e);let t=(0,j.R)(s.sessionSignerPrivateKey);d(t)}else localStorage.removeItem("session_".concat(e))}catch(t){localStorage.removeItem("session_".concat(e))}}},[e]),(0,r.useEffect)(()=>{if(t&&o&&l)try{let e=t.toSessionClient(o,l);m(e)}catch(e){}},[t,o,l]);let B=async()=>{if(s)throw Error("agwClient is still loading");if(!e||!t)throw Error("Missing required data for session creation");N(!0);try{let t=(0,y.A)(),s=(0,j.R)(t),a={signer:s.address,expiresAt:BigInt(Math.floor(Date.now()/1e3)+86400),feeLimit:{limitType:b.gT.Lifetime,limit:BigInt(1e18),period:BigInt(0)},callPolicies:[{target:f,selector:(0,p.V)("click()"),valueLimit:{limitType:b.gT.Unlimited,limit:BigInt(0),period:BigInt(0)},maxValuePerUse:BigInt(0),constraints:[]},{target:f,selector:(0,p.V)("reset()"),valueLimit:{limitType:b.gT.Unlimited,limit:BigInt(0),period:BigInt(0)},maxValuePerUse:BigInt(0),constraints:[]}],transferPolicies:[]};await A({session:a});let r=(0,b.P9)(a),l={sessionConfig:v(a),sessionHash:r,expiresAt:1e3*Number(a.expiresAt),createdAt:Date.now(),sessionSignerPrivateKey:t};return localStorage.setItem("session_".concat(e),JSON.stringify(l)),i(l),n(a),d(s),l}catch(e){throw e}finally{N(!1)}},M=async()=>{if(l){C(!0);try{await E({sessions:l}),e&&localStorage.removeItem("session_".concat(e)),i(null),n(null),d(null),m(null)}catch(e){throw e}finally{C(!1)}}},U=async e=>{if(!x||!R)throw Error("No valid session client available");L(!0);try{let t=await x.writeContract({address:f,abi:g,functionName:e,chain:x.chain,account:x.account});return D(t),t}catch(e){throw e}finally{L(!1)}},R=!!(a&&l&&o&&x),V=a&&a.expiresAt<=Date.now();return{sessionConfig:l,sessionHash:(null==a?void 0:a.sessionHash)||null,sessionClient:x,isSessionValid:R,isSessionExpired:V,isCreatingSession:u||P,isRevokingSession:k||I,isExecutingSession:S,isSessionLoading:_,isSessionSuccess:F,lastSessionTxHash:T,createNewSession:B,revokeCurrentSession:M,executeWithSession:U,globalWalletAddress:e,storedSession:a}}(),{data:S}=(0,c.d0)(),{data:L,refetch:T}=(0,m.Q)({address:f,abi:g,functionName:"totalClicks"}),{data:D,refetch:A}=(0,m.Q)({address:f,abi:g,functionName:"userClicks",args:[e],query:{enabled:!!e}}),{data:P}=(0,m.Q)({address:f,abi:g,functionName:"owner"}),{data:E,writeContract:I,isPending:_}=(0,u.x)(),{data:F,writeContract:B,isPending:M}=(0,u.x)(),{isLoading:U,isSuccess:R}=(0,h.g)({hash:E}),{isLoading:V,isSuccess:W}=(0,h.g)({hash:F});(0,r.useEffect)(()=>{R&&(T(),A())},[R,T,A]),(0,r.useEffect)(()=>{W&&(T(),A())},[W,T,A]),(0,r.useEffect)(()=>{d&&(T(),A())},[d,T,A]);let z=e&&P&&e.toLowerCase()===P.toLowerCase(),H=async()=>{if(a)try{await k("click")}catch(e){console.error("Session click failed, falling back to regular click:",e),null==I||I({address:f,abi:g,functionName:"click"})}else null==I||I({address:f,abi:g,functionName:"click"})},K=async()=>{if(z){if(a)try{await k("reset")}catch(e){console.error("Session reset failed, falling back to regular reset:",e),null==B||B({address:f,abi:g,functionName:"reset"})}else null==B||B({address:f,abi:g,functionName:"reset"})}};return{totalClicks:L||BigInt(0),userClicks:D||BigInt(0),owner:P,isOwner:z,sessionConfig:s,isSessionValid:a,isCreatingSession:i,isExecutingSession:l,isSessionLoading:o,isSessionSuccess:d,sessionClient:C,click:H,reset:K,createNewSession:x,revokeCurrentSession:N,isClicking:_||U||l,isResetting:M||V,isClickSuccess:R,isResetSuccess:W,isConnected:t,address:e,agwClient:S}}function k(){let{address:e}=(0,n.F)(),{logout:t}=(0,c.Zf)(),{data:s}=(0,d.A)({address:e}),{sessionConfig:i,isSessionValid:r,isCreatingSession:l,isExecutingSession:o,isSessionLoading:m,isSessionSuccess:u,createNewSession:h,revokeCurrentSession:f}=N(),g=async()=>{try{await h()}catch(e){console.error("Failed to create session:",e)}},b=async()=>{try{await f()}catch(e){console.error("Failed to revoke session:",e)}},p=async()=>{if(r)try{await f()}catch(e){console.error("Failed to revoke session:",e)}t()};return e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6 shadow-lg backdrop-blur-sm w-full max-w-md",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("p",{className:"text-sm sm:text-base font-medium font-[family-name:var(--font-roobert)]",children:"Connected to Abstract Global Wallet"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 font-mono break-all bg-black/20 px-2 py-1 rounded",children:e})]}),(0,a.jsx)(x,{balance:s}),(0,a.jsxs)("button",{className:"rounded-full border border-solid border-white/20 transition-colors flex items-center justify-center bg-white/10 text-white gap-2 hover:bg-white/20 hover:cursor-pointer text-sm px-5 font-[family-name:var(--font-roobert)] w-full h-10 py-2",onClick:p,children:[(0,a.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Disconnect Wallet"]}),(0,a.jsxs)("div",{className:"text-center text-xs text-gray-400 mt-4",children:[(0,a.jsx)("p",{children:"Powered by Abstract Global Wallet"}),(0,a.jsx)("p",{children:"Native Account Abstraction"})]})]})}),(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6 shadow-lg backdrop-blur-sm w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:"\uD83D\uDD11 Session Keys"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:"Enable seamless clicking without signing each transaction"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-white/10 bg-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(r?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:r?"Active Session":"No Active Session"})]}),i&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["Expires: ",new Date(1e3*Number(i.expiresAt)).toLocaleString()]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:r?(0,a.jsx)("button",{onClick:b,className:"flex-1 py-2 px-4 rounded-lg font-semibold bg-red-500 hover:bg-red-600 text-white transition-all duration-200",children:"Revoke Session"}):(0,a.jsx)("button",{onClick:g,disabled:l,className:"flex-1 py-2 px-4 rounded-lg font-semibold transition-all duration-200 ".concat(l?"bg-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"),children:l?"Creating...":"Create Session"})}),i&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Signer:"}),(0,a.jsxs)("span",{className:"font-mono",children:[i.signer.slice(0,6),"...",i.signer.slice(-4)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Fee Limit:"}),(0,a.jsxs)("span",{className:"font-mono",children:[i.feeLimit.limit.toString()," wei"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Allowed Functions:"}),(0,a.jsx)("span",{className:"text-green-400",children:"click(), reset()"})]})]}),(o||m)&&(0,a.jsx)("div",{className:"text-center py-2 bg-blue-500/10 rounded-lg border border-blue-500/20",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-sm text-blue-400",children:o?"Executing transaction...":"Waiting for confirmation..."})]})}),u&&(0,a.jsx)("div",{className:"text-center py-2 bg-green-500/10 rounded-lg border border-green-500/20",children:(0,a.jsx)("span",{className:"text-sm text-green-400",children:"✅ Session created successfully!"})})]})]})]}):null}function C(e){let{isSessionValid:t,isCreatingSession:s,createNewSession:i,agwClient:l}=e,[n,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t||s||o||!l||(d(!0),setTimeout(async()=>{try{await i()}catch(e){c(!0)}},1e3))},[t,s,i,o,l]),(0,r.useEffect)(()=>{t&&(c(!1),d(!1))},[t]);let x=async()=>{try{c(!1),await i()}catch(e){console.error("SessionStep: Failed to create session:",e),c(!0)}};return(0,a.jsxs)("div",{className:"space-y-8 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"text-center space-y-4 w-full max-w-lg",children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold font-[family-name:var(--font-roobert)] text-white",children:"Create Session Key"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl text-white font-[family-name:var(--font-roobert)] max-w-2xl mx-auto",children:n?"Failed to create session. Please try again.":"Create a session key to enable seamless clicking without signing each transaction."})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("button",{onClick:x,disabled:s,className:"px-6 py-3 rounded-lg font-semibold transition-all duration-200 ".concat(s?"bg-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"),children:s?"Creating Session...":"Create Session Key"}),s&&(0,a.jsx)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 max-w-md w-full flex flex-col items-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-blue-400 font-[family-name:var(--font-roobert)]",children:"Creating session..."})]})})]}),n&&(0,a.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 max-w-md w-full flex flex-col items-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{className:"text-red-400 font-[family-name:var(--font-roobert)]",children:"Session creation failed."})]}),(0,a.jsx)("button",{onClick:x,disabled:s,className:"px-4 py-2 rounded-lg font-semibold transition-all duration-200 ".concat(s?"bg-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"),children:s?"Creating...":"Try Again"})]})}),(0,a.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,a.jsx)(k,{})}),(0,a.jsx)("div",{className:"text-center w-full max-w-lg",children:(0,a.jsx)("p",{className:"text-white font-[family-name:var(--font-roobert)]",children:"Create a session to start clicking and competing!"})})]})}function S(){let{address:e}=(0,n.F)(),{logout:t}=(0,c.Zf)(),{data:s}=(0,d.A)({address:e}),{sessionConfig:i,isSessionValid:r,revokeCurrentSession:l}=N(),o=async()=>{if(r)try{await l()}catch(e){console.error("Failed to revoke session:",e)}t()},m=async()=>{try{await l()}catch(e){console.error("Failed to revoke session:",e)}};return e?(0,a.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 shadow-lg backdrop-blur-sm w-full max-w-md",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("p",{className:"text-sm font-medium font-[family-name:var(--font-roobert)]",children:"Connected"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 font-mono break-all bg-black/20 px-2 py-1 rounded",children:e})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 w-full",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(r?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-xs text-gray-300",children:r?"Session Active":"No Session"}),i&&(0,a.jsxs)("span",{className:"text-xs text-gray-400 ml-auto",children:["Expires: ",new Date(1e3*Number(i.expiresAt)).toLocaleTimeString()]})]}),(0,a.jsx)(x,{balance:s}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[r&&(0,a.jsxs)("button",{onClick:m,className:"rounded-full border border-solid border-white/20 transition-colors flex items-center justify-center bg-red-500/20 text-red-400 gap-2 hover:bg-red-500/30 hover:cursor-pointer text-xs px-3 font-[family-name:var(--font-roobert)] w-full h-8 py-1",children:[(0,a.jsx)("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Revoke Session"]}),(0,a.jsxs)("button",{className:"rounded-full border border-solid border-white/20 transition-colors flex items-center justify-center bg-white/10 text-white gap-2 hover:bg-white/20 hover:cursor-pointer text-xs px-3 font-[family-name:var(--font-roobert)] w-full h-8 py-1",onClick:o,children:[(0,a.jsx)("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Disconnect"]})]})]})}):null}function L(e){let{onClick:t,disabled:s=!1,isSessionValid:l=!1,isClicking:n=!1}=e,[c,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(n){let e=setTimeout(()=>{o(!0)},100);return()=>clearTimeout(e)}o(!1)},[n]);let d="/murmur";return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{onClick:()=>{s||n||t()},className:"relative cursor-pointer transition-all duration-200 ".concat(s?"cursor-not-allowed":"hover:scale-110 active:scale-95"),children:(0,a.jsxs)("div",{className:"rounded-full border-4 transition-all duration-500 ease-in-out overflow-hidden h-32 relative ".concat(l?"border-green-400 shadow-lg shadow-green-400/30":"border-blue-400 shadow-lg shadow-blue-400/30"),children:[(0,a.jsx)(i.default,{src:c?"".concat(d,"/cit1.gif"):"".concat(d,"/cit.gif"),alt:"Animated Mur Mur",width:120,height:120,unoptimized:!0,className:"rounded-full transition-all duration-500 ease-in-out translate-y-0 cat-image-transition ".concat(n?"translate-y-10":"translate-y-0")}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full z-10 ".concat(n?"h-[32%]":"h-0"),style:{background:"#111410",transition:n?"none":"all 500ms ease-in-out",transitionDelay:n?"0ms":"500ms"}})]})})})}function T(){let{totalClicks:e,userClicks:t,isOwner:s,click:i,reset:r,isClicking:l,isResetting:n,isConnected:c,address:o,sessionConfig:d,isSessionValid:x}=N();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white/5 border border-white/10 rounded-lg p-6 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"\uD83D\uDC31 Mur Mur"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Click the cat to earn points and climb the leaderboard!"})]}),c?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(L,{onClick:()=>{c&&i&&i()},disabled:l,isSessionValid:x||!1,isClicking:l}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center bg-white/5 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"Your Clicks"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-400",children:t.toString()})]}),(0,a.jsxs)("div",{className:"text-center bg-white/5 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"Total Clicks"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:e.toString()})]})]}),s&&(0,a.jsxs)("button",{onClick:()=>{s&&r&&r()},disabled:n,className:"w-full py-3 rounded-lg font-semibold transition-all duration-200 ".concat(n?"bg-gray-500 cursor-not-allowed":"bg-red-500 hover:bg-red-600 text-white"),children:["\uD83D\uDD04 ",n?"Resetting...":"Reset All Scores"]})]}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Connect your wallet to start clicking!"})})]}),(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white/5 border border-white/10 rounded-lg p-6 backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:"\uD83D\uDCCB Contract Info"})}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Contract:"}),(0,a.jsx)("span",{className:"font-mono text-gray-300",children:"0x83d3e7...dc80"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Network:"}),(0,a.jsx)("span",{className:"text-gray-300",children:"Abstract Testnet"})]}),o&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Your Address:"}),(0,a.jsxs)("span",{className:"font-mono text-gray-300",children:[o.slice(0,6),"...",o.slice(-4)]})]}),d&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Session Expires:"}),(0,a.jsx)("span",{className:"text-gray-300",children:new Date(1e3*Number(d.expiresAt)).toLocaleTimeString()})]})]})]})]})}function D(){let{address:e}=(0,n.F)(),{leaderboard:t,userRank:s,loading:i,error:l,refetch:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,{address:t}=(0,n.F)(),[s,a]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[d,x]=(0,r.useState)(null),{data:u,refetch:h}=(0,m.Q)({address:f,abi:g,functionName:"getLeaderboard",args:[BigInt(e)]}),{data:b,refetch:p}=(0,m.Q)({address:f,abi:g,functionName:"getUserRank",args:[t],query:{enabled:!!t}}),{data:j,refetch:y}=(0,m.Q)({address:f,abi:g,functionName:"getTotalUsers"});return(0,r.useEffect)(()=>{if(u){let[e,t]=u;a(e.map((e,s)=>({address:e,score:Number(t[s]),rank:s+1}))),o(!1),x(null)}},[u]),(0,r.useEffect)(()=>{if(b&&j){let[e,t]=b;l({rank:Number(e),score:Number(t),totalUsers:Number(j)})}},[b,j]),(0,r.useEffect)(()=>{void 0!==u||c||x("Failed to load leaderboard")},[u,c]),(0,r.useEffect)(()=>{let e=setInterval(()=>{h(),p(),y()},3e4);return()=>clearInterval(e)},[h,p,y]),{leaderboard:s,userRank:i,loading:c,error:d,refetch:()=>{h(),p(),y()}}}(10),o=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4)),d=e=>{switch(e){case 1:return"\uD83E\uDD47";case 2:return"\uD83E\uDD48";case 3:return"\uD83E\uDD49";default:return"#".concat(e)}},x=t=>(null==e?void 0:e.toLowerCase())===t.toLowerCase();return i?(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"\uD83C\uDFC6 Leaderboard"}),(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full"}),(0,a.jsx)("div",{className:"w-32 h-4 bg-white/20 rounded"})]}),(0,a.jsx)("div",{className:"w-16 h-4 bg-white/20 rounded"})]},t))})]}):l?(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"\uD83C\uDFC6 Leaderboard"}),(0,a.jsxs)("div",{className:"text-red-400 text-center py-8",children:[(0,a.jsx)("p",{children:l}),(0,a.jsx)("button",{onClick:c,className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors",children:"Try Again"})]})]}):(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83C\uDFC6 Leaderboard"}),(0,a.jsx)("button",{onClick:c,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 rounded-lg text-sm transition-colors",children:"Refresh"})]}),s&&s.rank>0&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-500/20 to-purple-500/20 border border-blue-400/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 text-white font-bold text-sm",children:["#",s.rank]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-300",children:"Your Position"}),(0,a.jsxs)("p",{className:"text-sm text-white/60",children:[s.score," click",1===s.score?"":"s"," • ",s.totalUsers," players"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-white",children:s.score.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-white/60",children:"clicks"})]})]})}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-white/60",children:[(0,a.jsx)("p",{children:"No players in leaderboard yet"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Start clicking to appear here!"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg transition-all ".concat(x(e.address)?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border border-blue-400/50":"bg-white/5 hover:bg-white/10"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 text-black font-bold text-lg",children:d(e.rank)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium ".concat(x(e.address)?"text-blue-300":"text-white"),children:[o(e.address),x(e.address)&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-blue-500 px-2 py-1 rounded-full",children:"You"})]}),(0,a.jsxs)("p",{className:"text-sm text-white/60",children:[e.score," click",1===e.score?"":"s"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:e.score.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-white/60",children:"clicks"})]})]},e.address))}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-white/20",children:(0,a.jsx)("p",{className:"text-xs text-white/40 text-center",children:"Leaderboard updates automatically every 30 seconds"})})]})}function A(){let{isConnected:e}=(0,n.F)(),{isSessionValid:t,isCreatingSession:s,createNewSession:i,agwClient:r}=N(),l=e?t?"game":"session":"connect";return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center z-10 text-white text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-8 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(e?"text-green-400":"connect"===l?"text-blue-400":"text-gray-400"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(e?"bg-green-500":"connect"===l?"bg-blue-500":"bg-gray-600"),children:"1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Connect Wallet"})]}),(0,a.jsx)("div",{className:"w-8 h-1 bg-gray-600"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat("session"===l?"text-blue-400":"game"===l?"text-green-400":"text-gray-400"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat("session"===l?"bg-blue-500":"game"===l?"bg-green-500":"bg-gray-600"),children:"2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Create Session"})]}),(0,a.jsx)("div",{className:"w-8 h-1 bg-gray-600"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat("game"===l?"text-green-400":"text-gray-400"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat("game"===l?"bg-green-500":"bg-gray-600"),children:"3"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Play Game"})]})]}),(()=>{switch(l){case"connect":return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold font-[family-name:var(--font-roobert)] text-white flex items-center gap-2",children:"\uD83D\uDC3E Mur Mur \uD83D\uDC3E"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl text-white font-[family-name:var(--font-roobert)] max-w-2xl",children:"Meow! Join the Mur Mur — connect your wallet and start the fun!"})]}),(0,a.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,a.jsx)(o,{})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-white font-[family-name:var(--font-roobert)]",children:"Connect your Abstract Global Wallet first to enter the mur mur game!"})})]});case"session":return(0,a.jsx)(C,{isSessionValid:t,isCreatingSession:s,createNewSession:i,agwClient:r});case"game":return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"text-center space-y-4 mb-8 w-full max-w-2xl mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold font-[family-name:var(--font-roobert)] text-white",children:"Ready to Click!"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl text-white font-[family-name:var(--font-roobert)] text-center",children:"Your session is active. Start clicking and compete for the top spot!"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(T,{}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(S,{})})]}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(D,{})})]})]})}})()]})})}function P(){return(0,a.jsxs)("div",{className:"relative grid grid-rows-[1fr_auto] min-h-screen p-8 pb-20 sm:p-20 font-[family-name:var(--font-avenue-mono)] bg-black overflow-hidden",children:[(0,a.jsx)(l,{}),(0,a.jsx)("main",{className:"relative flex flex-col items-center justify-center z-10 text-white text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-8 max-w-6xl mx-auto",children:[(0,a.jsx)(i.default,{src:"/murmur/abstract.svg",alt:"Abstract logo",width:240,height:32,quality:100,priority:!0}),(0,a.jsx)(A,{})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[557,111,441,684,358],()=>t(8)),_N_E=e.O()}]);